{% extends 'base.html' %}
{% block title %}Perfil{% endblock %}

{% block content %}
<h2>Perfil de {{ user.username }}</h2>

<!-- InformaciÃ³n del perfil -->
<div class="mb-4"></div>
  {% with profile=user.profile|default_if_none:'' %}
    {% if profile and profile.avatar %}
        <img src="{{ profile.avatar.url }}" alt="Avatar" width="150" class="rounded-circle mb-3">
    {% endif %}
    {% if profile %}
        <p>{{ profile.bio }}</p>
    {% endif %}
  {% endwith %}
  <a href="{% url 'blog:profile_edit' %}" class="btn btn-primary">Editar perfil</a>
</div>

<hr>

<!-- ðŸ”” SECCIÃ“N DE NOTIFICACIONES -->
<h3>ðŸ”” Notificaciones</h3>

<ul class="list-group">
    {% for notification in notifications %}
        <li class="list-group-item {% if not notification.is_read %}fw-bold{% endif %}">
            {{ notification.message }}

            {% if notification.post %}
                <a href="{% url 'blog:post_detail' notification.post.slug %}">
                    Ver post
                </a>
            {% elif notification.comment %}
                <a href="{% url 'blog:post_detail' notification.comment.post.slug %}#comment-{{ notification.comment.id }}">
                    Ver comentario
                </a>
            {% endif %}

            <small class="text-muted"> - {{ notification.created_at|timesince }} atrÃ¡s</small>
        </li>
    {% empty %}
        <li class="list-group-item">No tienes notificaciones.</li>
    {% endfor %}
</ul>

{% endblock %}